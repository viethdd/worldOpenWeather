$(document).ready(function(){var c;var o;var m=[];var k="imperial";$("form").keydown(function(h){if(h.which=="enter"){$(".search").trigger("click");g();
}});$(".search-text").keyup(function(h){if(h.which==27){$(this).val("");}});if(localStorage.length>0){$(".clear").css({opacity:"1",cursor:"pointer"});var j=JSON.parse(localStorage.getItem("cityArr")).length;
var a=JSON.parse(localStorage.getItem("cityArr"));for(i=1;i<=j;i++){d(i);$("#city"+(i)).html(a[i-1].city);$("#tempr"+(i)).html(a[i-1].temp);$("#min"+(i)).html(a[i-1].minx);
$("#minCond"+(i)).html(a[i-1].minCond);}$(".clear").on("click",function(){localStorage.clear();$(".right").children("*").remove();$(".clear").css({opacity:".4",cursor:"default"});
});$(".clear320").on("click",function(){localStorage.clear();$(".right").children(".ftr").remove();$(".clear320").css({opacity:".4",cursor:"default"});
});}else{$(".clear").css({opacity:".4",cursor:"default"});}$(".closeBtn").on("click",function(){$(".search-text").val("");$(".search-text").focus();});
var e=$(window).height(),l=$(window).width();if(l==320&&e==480){$("body").append("<div class='toolbar'></div>");$(".toolbar").append("<div class='favorite'>Favorite</div>");
$(".right").append("<div class='clear320'>Clear</div>");}else{$(".saveFavorite").remove();$(".clear320").remove();}$(".favorite").on("click",function(){$(".favorite").toggleClass("favorite-active");
$(".right").toggleClass("right-active");});function g(){var s=new Date();var h=s.getHours();var t=s.getMinutes();var r=s.getSeconds();function q(u){$(".daynight").css("opacity",u);
}if(h>18&&h<20){q(0.6);}if(h>20&&h<24){q(0.8);}if(h>0&&h<7){q(0.9);}if(h>7&&h<12){q(0.2);}if(h>12&&h<16){q(0.1);}if(h>16&&h<18){q(0.5);}}g();var p=[];var b=0;
$(".c").click(function(){k="metric";$(".c").addClass("active-unit");$(".f").removeClass("active-unit");$(".search").trigger("click");$(".unit-display").html("&deg;C");
var C=$(".tempr-content").html();var I=Math.round((C-32)*5/9);$(".tempr-content").html(I);var t=$("#tempr1").html();var L=Math.round((t-32)*5/9);$("#tempr1").html(L);
var r=$("#min1").html();var K=Math.round((r-32)*5/9);$("#min1").html(L);var y=$("#tempr2").html();var q=Math.round((y-32)*5/9);$("#tempr2").html(q);var v=$("#min2").html();
var h=Math.round((v-32)*5/9);$("#min2").html(q);var D=$("#tempr3").html();var u=Math.round((D-32)*5/9);$("#tempr3").html(u);var A=$("#min3").html();var s=Math.round((A-32)*5/9);
$("#min3").html(u);var G=$("#tempr4").html();var z=Math.round((G-32)*5/9);$("#tempr4").html(z);var F=$("#min4").html();var w=Math.round((F-32)*5/9);$("#min4").html(z);
var J=$("#tempr5").html();var E=Math.round((J-32)*5/9);$("#tempr5").html(E);var H=$("#min5").html();var B=Math.round((H-32)*5/9);$("#min5").html(E);});
$(".f").click(function(){k="imperial";$(".f").addClass("active-unit");$(".c").removeClass("active-unit");$(".unit-display").html("&deg;F");$(".search").trigger("click");
var F=$(".tempr-content").html();var z=Math.round((F*9/5)-32);$(".tempr-content").html(z);var v=$("#tempr1").html();var G=Math.round((v*9/5)+32);$("#tempr1").html(G);
var t=$("#min1").html();var D=Math.round((t*9/5)+32);$("#min1").html(D);var A=$("#tempr2").html();var L=Math.round((A*9/5)+32);$("#tempr2").html(L);var y=$("#min2").html();
var J=Math.round((y*9/5)+32);$("#min2").html(J);var C=$("#tempr3").html();var q=Math.round((C*9/5)+32);$("#tempr3").html(q);var B=$("#min3").html();var h=Math.round((B*9/5)+32);
$("#min3").html(h);var H=$("#tempr4").html();var s=Math.round((H*9/5)+32);$("#tempr4").html(s);var E=$("#min4").html();var r=Math.round((E*9/5)+32);$("#min4").html(r);
var K=$("#tempr5").html();var w=Math.round((K*9/5)+32);$("#tempr5").html(w);var I=$("#min5").html();var u=Math.round((I*9/5)+32);$("#min5").html(u);});
$(".search-text").on("click",function(){$(this).select();});$.getJSON("http://api.hostip.info/get_json.php",function(h){c=h.city;regionCode=h.region_code;
$(".search-text").val(c);$(".search").trigger("click");});$(".search").click(function(h){$(".clear").on("click",function(){localStorage.clear();$(".right").children("*").remove();
$(".clear").css({opacity:".4",cursor:"default"});});$(".clear320").on("click",function(){localStorage.clear();$(".right").children(".ftr").remove();$(".clear320").css({opacity:".4",cursor:"default"});
});c=$(".search-text").val();c=c.toLowerCase().replace(/\b[a-z]/g,function(r){return r.toUpperCase(/\$/ig);});$(".city-content").html(c);var q="http://api.wunderground.com/api/421a546215832f2b/forecast10day/q/"+c+".json";
$.ajax({url:q,dataType:"jsonp",success:function(T){var r=T.forecast.simpleforecast.forecastday[0],G=T.forecast.simpleforecast,M=G.forecastday[0].high.fahrenheit,I=G.forecastday[0].low.fahrenheit,y=G.forecastday[0].maxwind.mph,Q=G.forecastday[0].avehumidity,N=G.forecastday[0].conditions,P=G.forecastday[0].icon_url,E=G.forecastday[0].pop,K=G.forecastday[0].low.celsius,F=G.forecastday[0].high.celsius;
console.log("clow:  "+K);console.log("chigh:  "+F);if(P.indexOf("rain"||"snow"||"storm")>-1){$(".pop").remove();$(".top-content").append("<p class='pop' style='color: white'>"+E+"%</p>");
console.log("change "+E+"%");}else{$(".pop").remove();}if(N=="Chance of Rain"){$(".condition").css({"font-size":".9em"});}else{$(".condition").html(N);
}$(".tempr-content").html(M);$(".min").html(I);tempNextDayMax=[];tempNextDayMin=[];tempNextDayCond=[];tempNextDayWind=[];tempNextDayHumidity=[];tempNextDayPressure=[];
for(x=0;x<=4;x++){tempNextDayMax[x]=G.forecastday[x].high.fahrenheit;tempNextDayMin[x]=G.forecastday[x].low.fahrenheit;tempNextDayCond[x]=G.forecastday[x].conditions;
tempNextDayWind[x]=G.forecastday[x].maxwind.mph;tempNextDayHumidity[x]=G.forecastday[x].avehumidity;tempNextDayMax.push(tempNextDayMax[x]);tempNextDayMin.push(tempNextDayMax[x]);
tempNextDayCond.push(tempNextDayCond[x]);tempNextDayWind.push(tempNextDayWind[x]);tempNextDayHumidity.push(tempNextDayHumidity[x]);}console.log("tempNextDayMax2: "+tempNextDayMax[1]);
console.log("tempNextDayMin2: "+tempNextDayMin[1]);console.log("tempNextDaycond2: "+tempNextDayCond[1]);console.log("tempNextDayMax2: "+tempNextDayWind[1]);
if(P.indexOf("cloud")>-1){$(".condition-icon").attr("src","child/img/weather_cloud-01.png").css("opacity","1");}else{if(P.indexOf("rain")>-1){$(".condition-icon").attr("src","child/img/weather_rain.png").css("opacity","1");
}else{if(P.indexOf("snow")>-1){$(".condition-icon").attr("src","child/img/weather_snow.png").css("opacity","1");}else{if(P.indexOf("clear")>-1){$(".condition-icon").attr("src","child/img/weather_cloud-01.png").css("opacity",".2");
}else{console.log("design icon later");}}}}var L=$(".search-text").val();var A="http://api.worldweatheronline.com/free/v1/tz.ashx?q="+L+"&format=json&key=j7cf7epyawudqvbkf3cvc7r2";
$.ajax({url:A,dataType:"jsonp",success:function(ad){var ab=ad.data.time_zone[0].localtime;var s=ab.replace(/\d+-\d+-\d+\s/g,"");var af=ab.replace(/\s\d+:\d\d/g,"").replace("2014-","")+"-2014";
var Z=parseInt(ab.replace(/\d+-\d+-\d+\s/g,"").replace(/(:\d+)/g,""));var ac=parseInt(af.replace(/-\d+-\d+/g,""));var ah;var W=parseInt(af.replace("-2014","").replace(/\d+-/g,""));
var ae=parseInt(af.replace(/\d+-/g,""));var V;if(W==1||W==21||W==31){V="<sup>st</sup>";}if(W==2||W==22){V="<sup>nd</sup>";}if(W==3||W==23){V="<sup>rd</sup>";
}if(W>3&&W<21){V="<sup>th</sup>";}if(W>23&&W<31){V="<sup>th</sup>";}switch(ac){case 1:ah="Jan.";break;case 2:ah="Feb.";break;case 3:ah="Mar.";break;case 4:ah="Apr.";
break;case 5:ah="May.";break;case 6:ah="Jun.";break;case 7:ah="Jul.";break;case 8:ah="Aug.";break;case 9:ah="Sep.";break;case 10:ah="Oct.";break;case 11:ah="Nov.";
break;default:ah="Dec.";break;}var U=new Date();U.setDate(W);var ai=U.toDateString();var ag=ai.replace(/\s\w+/g,"").toString();switch(ag){case"Mon":ag="Monday";
break;case"Tue":ag="Tuesday";break;case"Wed":ag="Wednesday";break;case"Thu":ag="Thursday";break;case"Fri":ag="Friday";break;case"Sat":ag="Saturday";break;
case"Sun":ag="Sunday";break;default:break;}var Y=new Date();for(i=1;i<=5;i++){Y.setDate(W+i);var aa=Y.toDateString().replace(/\s\w+/g,"").toString();switch(aa){case"Mon":aa="Monday";
break;case"Tue":aa="Tuesday";break;case"Wed":aa="Wednesday";break;case"Thu":aa="Thursday";break;case"Fri":aa="Friday";break;case"Sat":aa="Saturday";break;
case"Sun":aa="Sunday";break;default:break;}$("#name-d"+i).html(aa);}if(Z>12){$(".time").html(s+" PM");}else{$(".time").html(s+" AM");}$(".date").html(ag+" "+ah+" <span style='font-weight: bold'>"+W+V+"</span> "+ae);
function X(aj){$(".daynight").css("opacity",aj);}if(Z>=18&&Z<20){X(0.6);}if(Z>=20&&Z<24){X(0.8);$(".center").css("box-shadow","0 0 4px white");$(".search").css("box-shadow","0 0 4px white");
}if(Z>=0&&Z<7){X(0.9);$(".center").css("box-shadow","0 0 5px white");$(".search").css("box-shadow","0 0 5px white");$(".c").css("box-shadow"," 0 -2px 5px 2px gray");
$(".f").css("box-shadow"," 0 -2px 5px 2px gray");$(".time-date").css("box-shadow"," 0 -2px 5px 2px gray");}if(Z>=7&&Z<12){X(0.1);$(".center").css("box-shadow","none");
$(".search").css("box-shadow","none");}if(Z>=12&&Z<16){X(0.3);$(".center").css("box-shadow","none");$(".search").css("box-shadow","none");}if(Z>=16&&Z<18){X(0.5);
$(".center").css("box-shadow","0 0 2px white");$(".search").css("box-shadow","0 0 2px white");$(".active-unit").css("box-shadow"," 0 -2px 3px 3px white");
console.log("Good Evening");}}});var S="<span style='font-weight:400;font-size:.5em;'> mph</span>";var u="<span style='font-weight:400;font-size:.5em;'> kmh</span>";
var J="<span style='font-weight:400;font-size:.8em;'> mph</span>";var z="<span style='font-weight:400;font-size:.8em;'> kmh</span>";var O;var w;if(h=="imperial"){w=S;
O=J;}else{if(h=="metric"){w=u;O=z;}}var R=$(window).width();var C=$(window).height();if(R==320&&C==480){$(".wind").html("<span style='font-weight:400'>W: </span>"+y+"<span style='font-weight:400;font-size:0.7em;'>kmh</span>");
$(".humidity").html("<span style='font-weight:400'>H: </span>"+Q+"<span style='font-weight:400;font-size:.7em;'> %</span>");}else{$(".clear320").remove();
$(".wind").html("<span style='font-weight:400'>Wind: </span>"+y+"<span style='font-weight:400;font-size:.7em;'>kmh</span>");$(".humidity").html("<span style='font-weight:400'>Humidity: </span>"+Q+"<span style='font-weight:400;font-size:.7em;'> %</span>");
}var t="<span style='font-weight:400;font-size:.5em;'> %</span>";var B="<span style='font-weight:400;font-size:.5em;'> kPa</span>";for(i=1;i<=5;i++){$("#n"+i+"dMax").html(tempNextDayMax[i-1]);
$("#n"+i+"dMin").html(tempNextDayMin[i-1]);if(tempNextDayCond[i-1].indexOf("Showers")){var H=/(\w+)\s(\w+)/gi;var v=/\s\w+/gi;var D;D=tempNextDayCond[i-1].replace(H,"$1 <span class='property'>$2</span>");
}$("#n"+i+"dCond").html(D);$("#n"+i+"dWind").html(tempNextDayWind[i-1]+" mph");$("#n"+i+"dHumidity").html(tempNextDayHumidity[i-1]+t);}}});$(".search-text").blur();
});var k="imperial";var f=[];$(".save").on("click",function(){var h=[];if(localStorage.length>0){var s=JSON.parse(localStorage.getItem("cityArr")).length;
ftrCount=s;console.log("localStorage ftrCount::"+ftrCount);var u=JSON.parse(localStorage.getItem("cityArr"));for(i=0;i<=u.length-1;i++){h.push(u[i]);}$(".clear").on("click",function(){localStorage.clear();
$(".right").children("*").remove();$(".clear").css({opacity:".4",cursor:"default"});});$(".clear320").on("click",function(){localStorage.clear();$(".right").children(".ftr").remove();
$(".clear320").css({opacity:".4",cursor:"default"});});}else{$(".clear").css({opacity:".4",cursor:"default"});ftrCount=0;console.log("localStorage ftrCount::"+ftrCount);
}ftrCount++;if(ftrCount===6){return false;}console.log("ftrCountsss "+ftrCount);cityText=$(".city-content").html();d(ftrCount);if(ftrCount===6){return false;
}var r=parseInt($(".tempr-content").html());var q=parseInt($(".min").html());var t=$(".condition").html();h.push({city:cityText,temp:r,minx:q,minCond:t});
localStorage.setItem("cityArr",JSON.stringify(h));var s=JSON.parse(localStorage.getItem("cityArr"));$("#city"+(ftrCount)).html(s[ftrCount-1].city);$("#tempr"+(ftrCount)).html(s[ftrCount-1].temp);
$("#min"+(ftrCount)).html(s[ftrCount-1].minx);$("#minCond"+(ftrCount)).html(s[ftrCount-1].minCond);});function d(h){var t=$('<div class="ftr" id="ftr'+(h)+'"></div>');
var s=$('<div class="city-title" id="city'+(h)+'"></div>');var u=$('<div class="tempr" id="tempr'+(h)+'"></div>');var r=$('<div class="minx" id="min'+(h)+'"></div>');
var q=$('<div class="minCond" id="minCond'+(h)+'"></div>');$(".right").append(t);t.append(s);t.append(u);t.append(r);t.append(q);$(".ftr").each(function(){$(this).on("click",function(){c=$(this).children(".city-title").html();
$(".search-text").val(c);$(".search").trigger("click");});});$(".clear").css({opacity:"1",cursor:"pointer"});}function n(){$(".search-text").autocomplete({source:function(q,h){$.ajax({url:"http://gd.geobytes.com/AutoCompleteCity?callback=?&q="+q.term,dataType:"jsonp",async:true,success:function(r){h(r);
}});},minLength:3,select:function(u,v){$(".tempr-content").addClass("tempr-content");var s=v.item;var r=/,\s\w+,/gi;var q=s.value.replace(r,",");c=q;var h=/^(\w+\s\w+,\s)|\w+,\s/g;
var t=s.value.replace(h,"");if(t=="United States"){$(".search-text").val(s.value.replace(", United States",""));}else{$(".search-text").val(q);console.log(q);
}$(".search").trigger("click");return false;}});}n();$(".search-text").autocomplete("option","delay",150);});